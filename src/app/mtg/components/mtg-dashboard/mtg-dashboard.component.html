<mat-grid-list cols="10" rowHeight="100px">

  <mat-grid-tile [colspan]="2" [rowspan]="1">
    <mat-form-field>
      <mat-select placeholder="Select MTG Set">
        <mat-option (click)="reset()">None</mat-option>
        <mat-option value="{{mtgSet.code}}" *ngFor="let mtgSet of mtgSets" (click)="getCardsBySet(mtgSet)">
          <span class="ss ss-{{mtgSet.code}} ss-2x ss-fw mr-1"></span>
          <span>{{mtgSet.name}}</span>
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-grid-tile>

  <!-- Selected Set Title -->
  <mat-grid-tile [colspan]="6" [rowspan]="1">
    <div *ngIf="selectedSet">
      <h1>
        <span class="ss ss-{{selectedSet.code}} ss-fw ss-2x mr-2"></span>
        {{selectedSet.name}} <span class="font-12">({{selectedSet.code.toUpperCase()}} / {{selectedSet.released_at | date:'MMMM y'}} / {{selectedSet.card_count}})</span>
        <i class="font-12 fas fa-trash pointer my-list-group-item ml-1" (click)="deleteSetAndCards(selectedSet.code)"></i>
      </h1>
    </div>
  </mat-grid-tile>

  <!-- Global Filter -->
  <mat-grid-tile [colspan]="2" [rowspan]="1">
    <mat-form-field *ngIf="selectedSet" appearance="outline">
      <mat-label>Global Filter</mat-label>
      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="">
    </mat-form-field>
  </mat-grid-tile>

</mat-grid-list>

<!-- Page Content -->
<div *ngIf="selectedSet">

  <!-- Table -->
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <!-- Number + Symbol column -->
    <ng-container matColumnDef="number">
      <th mat-header-cell *matHeaderCellDef>#</th>
      <td mat-cell *matCellDef="let card">{{card.collector_number}}</td>
    </ng-container>

    <!-- Rarity column -->
    <ng-container matColumnDef="rarity">
      <th mat-header-cell *matHeaderCellDef>Rarity</th>
      <td mat-cell *matCellDef="let card"><span class="ss ss-2x ss-{{card.set}} ss-{{card.rarity}}"></span></td>
    </ng-container>

    <!-- Name column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let card">{{(card.name.length > 28) ? (card.name | slice:0:28) + '..' : card.name}}</td>
    </ng-container>

    <!-- Type column -->
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let card">{{(card.type_line.length > 28) ? (card.type_line | slice:0:28) + '..' : card.type_line}}</td>
    </ng-container>

    <!-- Cost column -->
    <ng-container matColumnDef="cost">
      <th mat-header-cell *matHeaderCellDef>Mana Cost</th>
      <td mat-cell *matCellDef="let card">
            <span *ngFor="let styleItem of card.mana_cost_display">
              <span *ngIf="styleItem !== '//'" class="ms {{styleItem}} ms-cost ms-shadow"></span>
              <span *ngIf="styleItem === '//'"> {{styleItem}} </span>
            </span>
      </td>
    </ng-container>

    <!-- Value column -->
    <ng-container matColumnDef="value">
      <th mat-header-cell *matHeaderCellDef><i class="material-icons md-18">attach_money</i></th>
      <td mat-cell *matCellDef="let card">{{card.usd}}</td>
    </ng-container>

    <!-- Owned column -->
    <ng-container matColumnDef="owned">
      <th mat-header-cell *matHeaderCellDef>Owned</th>
      <td mat-cell *matCellDef="let card">
        <button type="button" mat-icon-button (click)="decreaseOwnedByOne(card)"><mat-icon>arrow_drop_down</mat-icon></button>
        <b class="font-20">{{card.collection_count}}</b>
        <button type="button" mat-icon-button (click)="increaseOwnedByOne(card)"><mat-icon>arrow_drop_up</mat-icon></button>
      </td>
    </ng-container>

    <!-- In Deck column -->
    <ng-container matColumnDef="in_deck">
      <th mat-header-cell *matHeaderCellDef>In Deck</th>
      <td mat-cell *matCellDef="let card">
        <button type="button" mat-icon-button (click)="decreaseInDeckByOne(card)"><mat-icon>arrow_drop_down</mat-icon></button>
        <b class="font-20">{{card.in_deck_count}}</b>
        <button type="button" mat-icon-button (click)="increaseInDeckByOne(card)"><mat-icon>arrow_drop_up</mat-icon></button>
      </td>
    </ng-container>

    <!-- Deck/Notes column -->
    <ng-container matColumnDef="deck_notes">
      <th mat-header-cell *matHeaderCellDef>Deck / Notes</th>
      <td mat-cell *matCellDef="let card">
        <mat-form-field>
          <input matInput (change)="storeDeckNote(card)" placeholder="" [(ngModel)]="card.deck_note">
        </mat-form-field>
      </td>
    </ng-container>

    <!-- Display of selected columns -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <!-- Paginator -->
  <mat-paginator [pageSizeOptions]="[10, 500]" showFirstLastButtons></mat-paginator>
</div>
